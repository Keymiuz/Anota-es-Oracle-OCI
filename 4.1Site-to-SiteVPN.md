# Site-to-Site VPN

## O que é a VPN Site-to-Site?

É um serviço **gratuito** do Oracle Cloud Infrastructure que cria uma conexão segura e criptografada entre sua Virtual Cloud Network (VCN) e sua rede on-premises (ou outra rede externa), utilizando a internet pública como meio de transporte.

* **Custo:** O serviço em si é gratuito no OCI.
* **Alta Disponibilidade (HA):**
    * Ao criar uma conexão IPSec, o OCI gera automaticamente **dois túneis**.
    * Por padrão, eles operam em modo **ativo-standby**.
    * Você pode habilitar **ECMP (Equal Cost Multi-Path)** para mudar a configuração para **ativo-ativo**.
* **Segurança:**
    * A conexão utiliza o protocolo IPSec para criptografar os dados.
    * Suporta **IKE (Internet Key Exchange) versão 1 e 2**.

## Casos de Uso Principais

1.  **Prova de Conceito (Proof of Concept - PoC):**
    * Ideal para testar rapidamente a conectividade entre o OCI e seu ambiente on-premises, sem a necessidade de um provedor terceiro.

2.  **Conectar Filiais e Outras Redes:**
    * Uma maneira de baixo custo para conectar de forma segura várias filiais ou redes de parceiros ao OCI.
    * Pode ser usado para conectar a VCN do OCI a uma VPC em **outro provedor de nuvem**.
    * Funciona com soluções de **SD-WAN**.

3.  **Redundância e Backup para o FastConnect:**
    * Este é um caso de uso ideal. O **FastConnect** atua como a conexão **primária** (oferecendo desempenho previsível), e a **VPN Site-to-Site** atua como a conexão de **backup secundária**.
    * Se o FastConnect falhar, a VPN mantém a conectividade, garantindo a continuidade dos negócios enquanto o problema é resolvido.

## Componentes

A configuração é um processo padrão que envolve os seguintes componentes:

1.  **Dynamic Routing Gateway (DRG):**
    * A conexão VPN é um "anexo" (attachment) no DRG. O DRG é o gateway no lado do OCI que gerencia a conexão.

2.  **Customer Premise Equipment (CPE):**
    * Este é o seu roteador VPN físico no local (on-premises).

3.  **Objeto CPE no OCI:**
    * Dentro do console do OCI, você cria uma representação virtual do seu roteador físico. Para isso, você precisa fornecer um nome e o endereço IP público real do seu CPE.
    * **Vantagem:** Uma vez que o objeto CPE é criado no OCI (e você seleciona o fornecedor, como Cisco, Checkpoint, etc.), o OCI pode **gerar um arquivo de configuração** que você pode baixar e aplicar diretamente no seu roteador físico, simplificando muito a configuração.

4.  **Conexão IPSec:**
    * Este é o recurso no OCI que efetivamente cria os dois túneis VPN.
    * Ele gera uma **chave secreta compartilhada (pre-shared key)** que deve ser configurada no seu CPE. Esta chave pode ser a gerada pelo OCI ou uma personalizada por você para atender às políticas de segurança da sua empresa.


## Detalhes Técnicos

* **Roteamento:**
    * A conexão suporta tanto **Roteamento Estático** quanto **Roteamento Dinâmico via BGP**.

* **CPEs Suportados:**
    * O OCI testa e valida uma lista de equipamentos de fornecedores (como Checkpoint, Cisco, etc.).
    * Para esses CPEs suportados, a Oracle fornece **documentação passo a passo** e, em muitos casos, **vídeos tutoriais** para guiar a configuração tanto no lado do OCI quanto no equipamento físico.

* **Criptografia do Túnel:**
    * **Payload Encryption:** Apenas o conteúdo (payload) do pacote é criptografado.
    * **Full Packet Encryption:** O pacote inteiro é criptografado.