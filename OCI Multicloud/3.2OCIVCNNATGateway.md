# VCN NAT Gateway (Network Address Translation)

## O Problema que o NAT Gateway Resolve

* **Recursos em Sub-redes Privadas:** Por definição, recursos em uma sub-rede privada não possuem endereços IP públicos.
* **Recursos sem IP Público:** Mesmo em uma sub-rede pública, você pode optar por não atribuir um IP público a um recurso.
* **Acesso à Internet:** Recursos sem um endereço IP público não podem usar o Internet Gateway para se comunicar com a internet.

O **NAT Gateway** entra em cena para resolver exatamente isso.

## O que é o NAT Gateway?

O NAT Gateway permite que recursos **sem IP público** (normalmente em sub-redes privadas) iniciem comunicação com a internet.

* **Fluxo de Comunicação:** A comunicação é **unidirecional**.
    * **Permitido:** De dentro da VCN para a internet.
    * **Bloqueado:** Recursos da internet **não podem** iniciar comunicação com suas instâncias privadas através do NAT Gateway.


## Como o NAT Gateway do OCI se Compara a Outros Provedores

O comportamento do NAT Gateway no OCI é mais simples e direto.

* **Microsoft Azure:** Requer um "NAT VNet" e pode ter vários IPs públicos associados.
* **AWS:** O NAT Gateway precisa ser colocado em uma sub-rede pública e depende de um Internet Gateway para funcionar.

* **Oracle Cloud Infrastructure (OCI):**
    * **Não precisa de uma sub-rede pública.**
    * **Não precisa de um Internet Gateway para funcionar.**
    * Você simplesmente habilita o NAT Gateway na VCN, e qualquer recurso sem IP público pode usá-lo, desde que haja uma regra de rota apontando para ele.
    * É o próprio NAT Gateway que possui o endereço IP público.

## Características e Limites

* **Conexões:** Suporta até **20.000 conexões simultâneas** para um único destino.
* **Endereço IP:**
    * **Ephemeral (Efêmero):** Um IP público é fornecido automaticamente pelo OCI.
    * **Reserved (Reservado):** Você pode reservar um IP público e atribuí-lo ao seu NAT Gateway.
* **Limite por VCN:** O limite padrão é de **um (1) NAT Gateway por VCN**. Se precisar de mais, você pode solicitar um aumento do limite de serviço.

## Consideração Importante: Trânsito de Roteamento

* O NAT Gateway **não pode ser usado para trânsito de roteamento**.
* **O que isso significa?** Apenas recursos **dentro da VCN onde o NAT Gateway reside** podem usá-lo.
* **Exemplo:** Se a VCN A (com um NAT Gateway) estiver conectada à VCN B, os recursos na VCN B **não podem** usar o NAT Gateway da VCN A para acessar a internet.