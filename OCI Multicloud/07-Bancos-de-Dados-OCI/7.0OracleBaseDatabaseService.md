# Oracle Base Database Service

## O que é o Oracle Base Database Service?

É um serviço do OCI que permite implantar bancos de dados Oracle completos e com todos os recursos na nuvem, em máquinas virtuais (VMs).

* **Flexibilidade de Implantação:**
    * **Single Instance:** Um único banco de dados em uma VM.
    * **2-Node RAC (Real Application Cluster):** Um cluster de banco de dados com dois nós para alta disponibilidade. Se um nó falhar, o outro assume a carga de trabalho.
* **Gerenciamento:** Você gerencia o ciclo de vida do banco de dados (provisionamento, patches, backups, disaster recovery) usando as ferramentas de automação do OCI (Console, CLI, APIs).
* **Modelos de Licenciamento:**
    * **License Included:** A licença do banco de dados está incluída no preço do serviço.
    * **BYOL (Bring Your Own License):** Você pode usar suas licenças on-premises existentes para o serviço na nuvem.

## Edições do Banco de Dados

Existem quatro níveis de licenciamento disponíveis:

1.  **Standard Edition:**
    * Inclui Multitenant (até 3 PDBs por CDB), Machine Learning, Spatial e Graph.

2.  **Enterprise Edition:**
    * Tudo da Standard Edition, mais:
    * Data Guard, Enterprise Management Pack, Data Masking & Subsetting, Tuning & Diagnostics.

3.  **Enterprise Edition - High Performance:**
    * Tudo da Enterprise Edition, mais:
    * Lifecycle Management Pack, Cloud Management Pack, Partitioning, Advanced Compression, Advanced Security.

4.  **Enterprise Edition - Extreme Performance:**
    * O nível mais alto, com todos os recursos anteriores, mais:
    * **In-Memory Database** e **Active Data Guard**.
    * *Nota: Active Data Guard e RAC requerem esta edição.*

**Importante:** Todas as edições incluem e **exigem** o uso de **Transparent Data Encryption (TDE)** para proteger os dados em repouso (at-rest) na nuvem.

## Opções de Gerenciamento de Armazenamento

Ao criar um sistema de banco de dados em VM, você pode escolher entre duas opções de software para gerenciar o armazenamento:

1.  **Logical Volume Management (LVM):**
    * Permite o redimensionamento dinâmico do armazenamento.
    * Facilita a migração entre dispositivos físicos.

2.  **Oracle Grid Infrastructure (com ASM):**
    * **ASM (Automatic Storage Management):** É um gerenciador de volumes e um sistema de arquivos projetado especificamente para arquivos de banco de dados Oracle.
    * **Disk Groups:** O ASM organiza os discos em "disk groups". Por padrão, ele cria dois:
        * **DATA:** Para os arquivos de dados do banco de dados (tablespaces, etc.).
        * **RECO:** Para arquivos de recuperação (backups, archivelogs).
    * **Alocação Padrão:** Por padrão, o espaço é alocado como **80% para DATA** e **20% para RECO**.
    * **Redundância:** Como o Block Storage do OCI já fornece espelhamento triplo, a redundância do ASM é definida como "Externa".
    * **Obrigatório para 2-Node RAC:** A utilização de ASM é **necessária** para implantar um sistema 2-Node RAC.

## Gerenciamento do Ciclo de Vida (Cloud Automation)

As ferramentas do OCI permitem gerenciar facilmente o ciclo de vida do seu banco de dados:

* **Mudar o Shape (CPU/Memória):** Você pode alterar o "shape" da VM para aumentar (ou diminuir) o número de OCPUs. A quantidade de memória é ajustada automaticamente de acordo com o shape selecionado.
* **Escalar o Armazenamento:** É possível aumentar o armazenamento de dados disponível para o banco de dados através da console.
* **Habilitar o Data Guard:** A console oferece um fluxo de trabalho simplificado para criar um banco de dados standby (peer) e configurar o Data Guard para proteção contra desastres.
* **Backups Automáticos:** Você pode configurar backups automáticos para o Object Storage, definindo a política de retenção desejada. É importante garantir que os pré-requisitos de rede (como um Service Gateway) estejam configurados para que a VM possa acessar o Object Storage.

## Alta Disponibilidade (HA) e Recuperação de Desastres (DR)

O serviço utiliza a infraestrutura resiliente do OCI para proteger seu banco de dados:

* **Regions (Regiões):** Localizações geográficas distintas.
* **Availability Domains (ADs):** Um ou mais data centers isolados (energia, refrigeração) dentro de uma região.
* **Fault Domains (FDs):** Uma subdivisão de hardware dentro de um AD. Cada AD possui 3 Fault Domains.
* **Como são usados:**
    * **2-Node RAC:** Cada nó do cluster é colocado em um **Fault Domain diferente**, garantindo que não estejam no mesmo hardware físico.
    * **Data Guard:** Pode ser implantado com o banco de dados standby em um **AD diferente** (para proteção contra falhas no data center) ou em uma **Região diferente** (para proteção contra desastres geográficos).

## Segurança: Defesa em Profundidade (Defense-in-Depth)

A Oracle aplica uma estratégia de segurança em múltiplas camadas para proteger os dados em todos os níveis:

| Camada | Exemplos de Recursos de Segurança |
| :--- | :--- |
| **Dados** | **TDE** (criptografia em repouso), **Data Redaction**, **Data Masking** |
| **Banco de Dados**| **Database Vault** (para controlar acesso de administradores), **Database Firewall** (para controlar SQL), **Data Safe** (para detectar dados sensíveis e avaliar riscos) |
| **Computação** | Isolamento de VMs, segurança do hipervisor. |
| **Rede** | VCN, Security Lists, NSGs, Gateways. |
| **Infraestrutura** | Segurança física dos data centers. |
| **Tenancy** | IAM (Políticas, Usuários, Grupos). |